import type { Province } from '../types';

// ============================================
// Argentina Provincial Solar Data
// Sources: NASA POWER, CAMMESA, ENRE, Provincial regulators
// Solar irradiation: kWh/m²/day (annual average peak sun hours)
// Tariffs: Updated Q1 2025 (ARS) — N3 (sin subsidio)
// ============================================

export const provinces: Province[] = [
  // === BUENOS AIRES & AMBA ===
  {
    id: 'caba',
    name: 'Ciudad de Buenos Aires',
    region: 'buenos_aires',
    solarIrradiation: 4.4,
    annualIrradiation: 1606,
    utility: 'EDENOR / EDESUR',
    hasNetMetering: true,
    netMeteringType: 'net_billing',
    residentialTariff: {
      fixedCharge: 8500,
      energyCharge: 185,
      tiers: [
        { name: 'Hasta 150 kWh', upToKwh: 150, pricePerKwh: 145 },
        { name: '150–325 kWh', upToKwh: 325, pricePerKwh: 185 },
        { name: '325–500 kWh', upToKwh: 500, pricePerKwh: 245 },
        { name: '500–700 kWh', upToKwh: 700, pricePerKwh: 310 },
        { name: 'Más de 700 kWh', upToKwh: 99999, pricePerKwh: 385 },
      ],
      taxRate: 0.27,
      subsidyLevel: 'N3',
    },
    commercialTariff: {
      fixedCharge: 15800,
      energyCharge: 220,
      taxRate: 0.27,
      subsidyLevel: 'N3',
    },
    avgTemperature: 17.9,
    temperatureCoefficient: 0.004,
  },
  {
    id: 'buenosaires',
    name: 'Buenos Aires (Provincia)',
    region: 'buenos_aires',
    solarIrradiation: 4.5,
    annualIrradiation: 1642,
    utility: 'EDENOR / EDESUR / EDEN / EDES / EDEA',
    hasNetMetering: true,
    netMeteringType: 'net_billing',
    residentialTariff: {
      fixedCharge: 7800,
      energyCharge: 175,
      tiers: [
        { name: 'Hasta 150 kWh', upToKwh: 150, pricePerKwh: 135 },
        { name: '150–325 kWh', upToKwh: 325, pricePerKwh: 175 },
        { name: '325–500 kWh', upToKwh: 500, pricePerKwh: 235 },
        { name: 'Más de 500 kWh', upToKwh: 99999, pricePerKwh: 350 },
      ],
      taxRate: 0.25,
      subsidyLevel: 'N3',
    },
    commercialTariff: {
      fixedCharge: 14500,
      energyCharge: 210,
      taxRate: 0.25,
      subsidyLevel: 'N3',
    },
    avgTemperature: 16.2,
    temperatureCoefficient: 0.004,
  },
  // === CENTRO ===
  {
    id: 'cordoba',
    name: 'Córdoba',
    region: 'centro',
    solarIrradiation: 5.0,
    annualIrradiation: 1825,
    utility: 'EPEC',
    hasNetMetering: true,
    netMeteringType: 'net_metering',
    residentialTariff: {
      fixedCharge: 7200,
      energyCharge: 165,
      tiers: [
        { name: 'Hasta 200 kWh', upToKwh: 200, pricePerKwh: 130 },
        { name: '200–400 kWh', upToKwh: 400, pricePerKwh: 165 },
        { name: '400–600 kWh', upToKwh: 600, pricePerKwh: 220 },
        { name: 'Más de 600 kWh', upToKwh: 99999, pricePerKwh: 310 },
      ],
      taxRate: 0.23,
      subsidyLevel: 'N3',
    },
    commercialTariff: {
      fixedCharge: 13000,
      energyCharge: 195,
      taxRate: 0.23,
      subsidyLevel: 'N3',
    },
    avgTemperature: 17.4,
    temperatureCoefficient: 0.004,
  },
  {
    id: 'santafe',
    name: 'Santa Fe',
    region: 'litoral',
    solarIrradiation: 4.7,
    annualIrradiation: 1715,
    utility: 'EPE Santa Fe',
    hasNetMetering: true,
    netMeteringType: 'net_billing',
    residentialTariff: {
      fixedCharge: 6800,
      energyCharge: 158,
      taxRate: 0.24,
      subsidyLevel: 'N3',
    },
    commercialTariff: {
      fixedCharge: 12500,
      energyCharge: 190,
      taxRate: 0.24,
      subsidyLevel: 'N3',
    },
    avgTemperature: 18.1,
    temperatureCoefficient: 0.004,
  },
  // === CUYO ===
  {
    id: 'mendoza',
    name: 'Mendoza',
    region: 'cuyo',
    solarIrradiation: 5.4,
    annualIrradiation: 1971,
    utility: 'EDEMSA',
    hasNetMetering: true,
    netMeteringType: 'net_metering',
    residentialTariff: {
      fixedCharge: 6500,
      energyCharge: 155,
      taxRate: 0.22,
      subsidyLevel: 'N3',
    },
    commercialTariff: {
      fixedCharge: 12000,
      energyCharge: 185,
      taxRate: 0.22,
      subsidyLevel: 'N3',
    },
    avgTemperature: 16.8,
    temperatureCoefficient: 0.004,
  },
  {
    id: 'sanjuan',
    name: 'San Juan',
    region: 'cuyo',
    solarIrradiation: 5.8,
    annualIrradiation: 2117,
    utility: 'Energía San Juan',
    hasNetMetering: true,
    netMeteringType: 'net_metering',
    residentialTariff: {
      fixedCharge: 5800,
      energyCharge: 140,
      taxRate: 0.22,
      subsidyLevel: 'N3',
    },
    commercialTariff: {
      fixedCharge: 11000,
      energyCharge: 170,
      taxRate: 0.22,
      subsidyLevel: 'N3',
    },
    avgTemperature: 18.4,
    temperatureCoefficient: 0.004,
  },
  {
    id: 'sanluis',
    name: 'San Luis',
    region: 'cuyo',
    solarIrradiation: 5.3,
    annualIrradiation: 1934,
    utility: 'EDESAL',
    hasNetMetering: true,
    netMeteringType: 'net_billing',
    residentialTariff: {
      fixedCharge: 5500,
      energyCharge: 138,
      taxRate: 0.21,
      subsidyLevel: 'N3',
    },
    commercialTariff: {
      fixedCharge: 10500,
      energyCharge: 168,
      taxRate: 0.21,
      subsidyLevel: 'N3',
    },
    avgTemperature: 17.0,
    temperatureCoefficient: 0.004,
  },
  // === NORTE ===
  {
    id: 'salta',
    name: 'Salta',
    region: 'norte',
    solarIrradiation: 5.6,
    annualIrradiation: 2044,
    utility: 'EDESA',
    hasNetMetering: true,
    netMeteringType: 'net_billing',
    residentialTariff: {
      fixedCharge: 5200,
      energyCharge: 130,
      taxRate: 0.21,
      subsidyLevel: 'N3',
    },
    commercialTariff: {
      fixedCharge: 10000,
      energyCharge: 160,
      taxRate: 0.21,
      subsidyLevel: 'N3',
    },
    avgTemperature: 20.4,
    temperatureCoefficient: 0.004,
  },
  {
    id: 'jujuy',
    name: 'Jujuy',
    region: 'norte',
    solarIrradiation: 5.9,
    annualIrradiation: 2153,
    utility: 'EJSED',
    hasNetMetering: true,
    netMeteringType: 'net_billing',
    residentialTariff: {
      fixedCharge: 4800,
      energyCharge: 125,
      taxRate: 0.21,
      subsidyLevel: 'N3',
    },
    commercialTariff: {
      fixedCharge: 9500,
      energyCharge: 155,
      taxRate: 0.21,
      subsidyLevel: 'N3',
    },
    avgTemperature: 19.2,
    temperatureCoefficient: 0.004,
  },
  {
    id: 'tucuman',
    name: 'Tucumán',
    region: 'norte',
    solarIrradiation: 5.1,
    annualIrradiation: 1861,
    utility: 'EDET',
    hasNetMetering: true,
    netMeteringType: 'net_billing',
    residentialTariff: {
      fixedCharge: 5500,
      energyCharge: 145,
      taxRate: 0.22,
      subsidyLevel: 'N3',
    },
    commercialTariff: {
      fixedCharge: 10500,
      energyCharge: 175,
      taxRate: 0.22,
      subsidyLevel: 'N3',
    },
    avgTemperature: 19.8,
    temperatureCoefficient: 0.004,
  },
  {
    id: 'catamarca',
    name: 'Catamarca',
    region: 'norte',
    solarIrradiation: 5.7,
    annualIrradiation: 2080,
    utility: 'EC SAPEM',
    hasNetMetering: false,
    netMeteringType: 'pending',
    residentialTariff: {
      fixedCharge: 4500,
      energyCharge: 120,
      taxRate: 0.21,
      subsidyLevel: 'N3',
    },
    commercialTariff: {
      fixedCharge: 9000,
      energyCharge: 150,
      taxRate: 0.21,
      subsidyLevel: 'N3',
    },
    avgTemperature: 20.0,
    temperatureCoefficient: 0.004,
  },
  // === LITORAL ===
  {
    id: 'entrerios',
    name: 'Entre Ríos',
    region: 'litoral',
    solarIrradiation: 4.6,
    annualIrradiation: 1679,
    utility: 'ENERSA',
    hasNetMetering: true,
    netMeteringType: 'net_billing',
    residentialTariff: {
      fixedCharge: 6200,
      energyCharge: 152,
      taxRate: 0.23,
      subsidyLevel: 'N3',
    },
    commercialTariff: {
      fixedCharge: 11500,
      energyCharge: 182,
      taxRate: 0.23,
      subsidyLevel: 'N3',
    },
    avgTemperature: 18.0,
    temperatureCoefficient: 0.004,
  },
  {
    id: 'misiones',
    name: 'Misiones',
    region: 'litoral',
    solarIrradiation: 4.5,
    annualIrradiation: 1642,
    utility: 'EMSA',
    hasNetMetering: true,
    netMeteringType: 'net_billing',
    residentialTariff: {
      fixedCharge: 5800,
      energyCharge: 145,
      taxRate: 0.22,
      subsidyLevel: 'N3',
    },
    commercialTariff: {
      fixedCharge: 11000,
      energyCharge: 175,
      taxRate: 0.22,
      subsidyLevel: 'N3',
    },
    avgTemperature: 21.0,
    temperatureCoefficient: 0.004,
  },
  {
    id: 'corrientes',
    name: 'Corrientes',
    region: 'litoral',
    solarIrradiation: 4.8,
    annualIrradiation: 1752,
    utility: 'DPEC',
    hasNetMetering: false,
    netMeteringType: 'pending',
    residentialTariff: {
      fixedCharge: 5500,
      energyCharge: 138,
      taxRate: 0.22,
      subsidyLevel: 'N3',
    },
    commercialTariff: {
      fixedCharge: 10500,
      energyCharge: 168,
      taxRate: 0.22,
      subsidyLevel: 'N3',
    },
    avgTemperature: 21.5,
    temperatureCoefficient: 0.004,
  },
  // === PATAGONIA ===
  {
    id: 'neuquen',
    name: 'Neuquén',
    region: 'patagonia',
    solarIrradiation: 4.8,
    annualIrradiation: 1752,
    utility: 'EPEN',
    hasNetMetering: true,
    netMeteringType: 'net_billing',
    residentialTariff: {
      fixedCharge: 4200,
      energyCharge: 110,
      taxRate: 0.21,
      subsidyLevel: 'N3',
    },
    commercialTariff: {
      fixedCharge: 8500,
      energyCharge: 140,
      taxRate: 0.21,
      subsidyLevel: 'N3',
    },
    avgTemperature: 14.7,
    temperatureCoefficient: 0.004,
  },
  {
    id: 'rionegro',
    name: 'Río Negro',
    region: 'patagonia',
    solarIrradiation: 4.6,
    annualIrradiation: 1679,
    utility: 'EdERSA',
    hasNetMetering: true,
    netMeteringType: 'net_billing',
    residentialTariff: {
      fixedCharge: 4500,
      energyCharge: 115,
      taxRate: 0.21,
      subsidyLevel: 'N3',
    },
    commercialTariff: {
      fixedCharge: 8800,
      energyCharge: 145,
      taxRate: 0.21,
      subsidyLevel: 'N3',
    },
    avgTemperature: 13.5,
    temperatureCoefficient: 0.004,
  },
  {
    id: 'chubut',
    name: 'Chubut',
    region: 'patagonia',
    solarIrradiation: 4.3,
    annualIrradiation: 1569,
    utility: 'Servicios Públicos SE',
    hasNetMetering: false,
    netMeteringType: 'pending',
    residentialTariff: {
      fixedCharge: 3800,
      energyCharge: 100,
      taxRate: 0.21,
      subsidyLevel: 'N3',
    },
    commercialTariff: {
      fixedCharge: 7500,
      energyCharge: 130,
      taxRate: 0.21,
      subsidyLevel: 'N3',
    },
    avgTemperature: 12.4,
    temperatureCoefficient: 0.004,
  },
];

export const getProvince = (id: string): Province | undefined =>
  provinces.find((p) => p.id === id);

export const getProvincesByRegion = (region: Province['region']): Province[] =>
  provinces.filter((p) => p.region === region);

export const regionNames: Record<Province['region'], string> = {
  buenos_aires: 'Buenos Aires',
  centro: 'Centro',
  cuyo: 'Cuyo',
  norte: 'Norte',
  litoral: 'Litoral',
  patagonia: 'Patagonia',
};
